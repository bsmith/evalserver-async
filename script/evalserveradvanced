#!/usr/bin/env perl

use strict;
use warnings;
our $VERSION = '0.018';
my $debug;

BEGIN {
    use App::EvalServerAdvanced::Config;
    use Getopt::Long;
    GetOptions(
        "config-dir=s" => \$App::EvalServerAdvanced::Config::config_dir,
        "debug" => \$debug,
        "help", \&displayhelp,
    );

}

use App::EvalServerAdvanced;

sub displayhelp {
    print <<'EOH';
evalserveradvanced 
  A sophisticated sandbox for running arbitrary code in a mostly safe manner.

  Options
    --config-dir  - Specify where to find all configuration files, and plugins
    --debug       - Enable debug mode
    --help        - Display this help
EOH
    exit(0);
}

unless (defined $App::EvalServerAdvanced::Config::config_dir) {
    print "config-dir must be set\n\n";
    displayhelp; 
}

my $es = App::EvalServerAdvanced->new();
$es->run();
#EvalServer->run();
